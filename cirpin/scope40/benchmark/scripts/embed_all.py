import progres as pg
import torch
import sys
import os

filepath = sys.argv[1] # .txt file of filepaths generated by make_all_filepaths.py
# filepath is txt file with .pdb filenames listed

output = sys.argv[2]
model_name = sys.argv[3]


def embed_filepaths(filepath, model_name, output):
    ''' Get progres embedding'''
    if model_name == 'CIRPIN':
        model_path = '/home/ubuntu/CIRPIN/trained_models/CIRPIN_model/CIRPIN_model_5k_cp_epoch301.pt'
    else:
        model_path = '/home/ubuntu/CIRPIN/trained_models/Progres_model/Progres_trained_model.pt'

    pg.progres_embed(structurelist=filepath, outputfile=output, trained_model = model_path)


embed_filepaths(filepath, model_name, output)
